# Apache Camel

# [Apache Camel](https://camel.apache.org/)

Apache Camel은 Java 기반의 오픈소스 통합 프레임워크입니다. 다양한 프로토콜과 API를 지원하여 라우팅 및 미들웨어 기능을 쉽게 구현할 수 있게 해줍니다. Camel은 간단하고 직관적인 DSL(Domain Specific Language)을 제공하며, 이를 통해 다양한 EIP(Enterprise Integration Pattern)을 지원합니다.

Camel은 다양한 데이터 형식과 프로토콜을 처리할 수 있습니다. 이를 위해 다양한 컴포넌트를 제공하며, 이러한 컴포넌트는 데이터 흐름을 보다 쉽게 처리할 수 있도록 도와줍니다. 또한, Camel은 다양한 라우팅 패턴을 지원하여, 데이터의 흐름을 보다 효과적으로 제어할 수 있습니다.

Apache Camel은 여러 가지 프로젝트와 통합이 가능합니다. Apache ActiveMQ, Apache CXF, Apache MINA, Apache Karaf, Apache ServiceMix 등 다양한 Apache 프로젝트와의 통합이 가능하며, 이를 통해 상호운용성이 보장됩니다. 또한, Camel은 매우 활발한 커뮤니티를 가지고 있으며, 이를 통해 사용자들은 다양한 지원을 받을 수 있습니다.

Apache Camel은 기업에서 다양한 시스템을 통합할 때 매우 유용한 도구입니다. 특히, 여러 가지 프로토콜과 데이터 형식을 지원하며, 다양한 라우팅 패턴과 컴포넌트를 제공하기 때문에, 사용자들은 보다 쉽게 시스템을 통합할 수 있습니다.

## About Camel

### Message

- 경로로 전송되는 데이터가 포함된 내용
- 각 메시지에는 고유 식별자가 존재
- 본문/머리글 및 첨부파일로 구성됨

### Exchange

- 시스템간의 대화의 상태를 포함하는 홀더 객체
- `메세지`의 컨테이너
- 하나의 `메세지` 는 처리단계에서 사용되는 payload 뿐만아니라 `String key`와 `Object Map` 으로 표현되는 헤더를 가짐
- In메세지는 항상 프로레서로 들어가는 `익스체인지` 를 나타냄
- 만약 하나의 프로세서가 Out메세지를 정하면, 카멜 컨텍스트는 다음 프로세서로 넘기기 전에 그것을 익스체인지의 In으로 옮김

### Route

- 카멜 DSL을 사용해 정의한 메세지 처리 단계를 연결한 것
- 라우트에 정의된 각 단계를 통해 순차적으로 `익스체인지` 를 처리함
- 엔진은 스레딩, 트랜잭션, 에러처리, 메세지복제 등을 담당
- 항상 `from()` 안에 하나의 Consumer 엔드포인트로 시작하고 하나 또는 그 이상의 프로세서 단계를 포함함
- 라우트 내의 프로세싱 단계는 느슨하게 연결되어 있고(`loosely coupled`) 서로를 호출하지 않으며, 그들간의 메세지를 전달하는 대신 카멜 컨텍스트를 의존함

### Component

- 전송 또는 공통의 카멜인터페이스 뒤에서 전송이나 기술과의 통신을 캡슐화한 라이브러리
- 컴포넌트를 사용해 메세지 Producer 또는 Consumer 처리

### EndPoint

- 컴포넌트에 의해 해석되는 주소값
- 컴포넌트가 메세지를 받거나 보내는 디렉토리, 메시지큐 또는 데이터베이스 테이블 같은 대상자원을 식별
- 웹서비스 URI, 대기열큐 URI, 파일, 메일 등 참조
- `from()` 안에 사용되는 하나의 엔드포인트를 `Consumer` 엔드포인트, `to()` 안에 사용되는 것을 `Producer` 엔드포인트 라고 함
- 엔드포인트는 URI로 표현되며 그 속성은 대응되는 컴포넌트에 적용

### Camel DSL(Domain Specific Language)

- 카멜 라우트는 각각의 DSL을 통해 정의
- 어떤 DSL을 사용할것인지 개별적으로 결정(Java, XML, yaml)